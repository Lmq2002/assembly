;九九乘法表的判断错误
;2022/10/18

DATA SEGMENT

TABLE	DB 7,2,3,4,5,6,7,8,9
	DB 2,4,7,8,10,12,14,16,18
	DB 3,6,9,12,15,18,21,24,27
 	DB 4,8,12,16,7,24,28,32,36
 	DB 5,10,15,20,25,30,35,40,45
 	DB 6,12,18,24,30,7,42,48,54
 	DB 7,14,21,28,35,42,49,56,63
 	DB 8,16,24,32,40,48,56,7,72
 	DB 9,18,27,36,45,54,63,72,81

INPUT	DB 'X    Y',0DH,0AH,'$'
OUTPUT	DB 29H,'    ',29H,'    ','ERROR$'    

NUM	DB 0		;第NUM个，初始为0，除数结果商得行数，模得列数;输出结果记得各加1且转换为数字字符
XX	DB 0
YY	DB 0
FF 	DB 0
CRLF	DB 0DH,0AH,'$'	;回车，用09H的DOS指令

DATA ENDS

CODE SEGMENT
ASSUME CS:CODE,DS:DATA

START:	MOV AX,DATA
	MOV DS,AX	;数据段地址

	LEA DX,INPUT
	MOV AH,09H
	INT 21H		;输出列项

LOOP1:	;乘积与比较
	;乘积
	MOV AL,XX
	MOV AH,YY
	MOV BL,AL
	ADD AL,1
	ADD AH,1
	MUL AH
	MOV FF,AL
	;存储变量
	
	;比较函数
	CALL ISEQUAL
	CALL CHANGE
	MOV AL,XX
	CMP AL,09H
	JE EXIT

	JMP LOOP1 

CHANGE:	;判断行列
	MOV AL,NUM
	INC AL
	MOV NUM,AL

	MOV AL,YY
	CMP AL,08H
	JNE NOC
	MOV AL,0
	MOV YY,AL
	MOV AL,XX
	INC AL
	MOV XX,AL
	RET
NOC:	INC AL
	MOV YY,AL
	RET


ISEQUAL: ;判断AL乘积是否与判断数相等
	LEA SI,TABLE
	MOV CX,0 
	MOV CL,NUM
	ADD SI,CX
	MOV AL,FF
	MOV AH,[SI]
	CMP AH,AL		;进行比较
	JE   OO			;跳转
	
	MOV AL,XX
	MOV AH,YY
	ADD AL,31H
	ADD AH,31H
	MOV OUTPUT[0],AL
	MOV OUTPUT[5],AH
	LEA DX,OUTPUT
	MOV AH,09H
 	INT 21H		;输出错误信息
	LEA DX,CRLF
	MOV AH,09H
	INT 21H		;回车

OO:	RET


EXIT:	
	MOV AH,4CH
	INT 21H
CODE ENDS
END START







