;MYASM3  输出数字

PUBLIC OUTPUT
EXTERN	COUNT:WORD	;16WORD,32DWORD

DATA SEGMENT WORD PUBLIC 'DATA'
	NUM 	DB 0
DATA ENDS

CODE SEGMENT WORD PUBLIC 'CODE'
ASSUME CS:CODE,DS:DATA

OUTPUT PROC NEAR

MYPUSH:
	MOV DX,0
	MOV AX,COUNT	;被除数为32位
	MOV BX,10
	DIV BX		;AX商，DX余，余数入栈，商数循环
	
	CMP AX,0
	JE AA

	ADD DX,30H
	PUSH DX
	MOV COUNT,AX	;压栈

	MOV AL,NUM
	INC AL
	MOV NUM,AL
	JMP MYPUSH
AA:
	CMP DX,0
	JE BB
	ADD DX,30H
	MOV AH,02H
	INT 21H		;输出最高位
BB:
	MOV AL,NUM
	CMP AL,0		;栈是否为空
	JE FINAL
	SUB AL,1
	MOV NUM,AL
	POP DX
	MOV AH,02H
	INT 21H
	JMP BB
FINAL:
	RET
OUTPUT ENDP
CODE ENDS
END