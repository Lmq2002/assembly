;主程序源文件，5050程序
;MYASM1 功能为 输入
;MYASM2 功能为 求和、转换
;MYASM3 功能为 输出

EXTERN 	SHIFT:PROC	;字符串转换为数字
EXTERN 	ADDP:PROC
EXTERN 	OUTPUT:PROC
PUBLIC	IS
PUBLIC	INTERGER
PUBLIC    COUNT

DATA SEGMENT WORD PUBLIC 'DATA'
	HINT1 	DB 'PLEASE INPUT AN INTERGER','$'
	HINT2 	DB 'THE SUM IS ','$'
	CRLF   	DB 0DH,0AH,'$'
	IS	DB 20
		DB ?
		DB 20 DUP(?)	;输入
	INTERGER	DW 0	;数字
	COUNT		DW 0	;和
DATA ENDS

CODE SEGMENT WORD PUBLIC 'CODE'
ASSUME CS:CODE,DS:DATA
START:
	MOV AX,DATA
	MOV DS,AX

	MOV DX,OFFSET HINT1
	MOV AH,09H
	INT 21H			;HINT1提示输出

	MOV DX,OFFSET CRLF
	MOV AH,09H
	INT 21H			;回车

	CALL INPUT		;输入字符串

	CALL SHIFT	;字符串转换为数字
	
	PUSH INTERGER
	CALL ADDP
	ADD SP,2		;求和,参数为数字

	MOV DX,OFFSET HINT2	
	MOV AH,09H
	INT 21H			;HINT2输出结果为

	CALL OUTPUT

	MOV DX,OFFSET CRLF
	MOV AH,09H
	INT 21H			;回车

	MOV AH,4CH
	INT 21H
	
	
INPUT PROC NEAR
	MOV DX,OFFSET IS
	MOV AH,0AH
	INT 21H			;输入字符串

	MOV DX,OFFSET CRLF
	MOV AH,09H
	INT 21H			;回车
	
	RET
INPUT ENDP

CODE ENDS
END START